<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body style="background-color:white;">
    <canvas width="400" height="400"></canvas>
    <script>
        // 获取对应的CanvasRenderingContext2D对象(画笔)
        const _canvas = document.getElementsByTagName('canvas')[0]
        const _context = _canvas.getContext('2d');

        // _canvas.style.marginTop = (window.innerHeight - 400)/3 + 'px';
        // _canvas.style.marginLeft = (window.innerWidth - 400)/2 + 'px';

        let __num = -1, ___num;
        let _color = _context.createLinearGradient(0, 400, 400, 0);
        _color.addColorStop(0, 'red');
        _color.addColorStop(.1, 'orange');
        _color.addColorStop(.2, 'yellow');
        _color.addColorStop(.3, 'green');
        _color.addColorStop(.4, 'blue');
        _color.addColorStop(.5, 'purple');
        _color.addColorStop(.6, 'red');
        _color.addColorStop(.7, 'orange');
        _color.addColorStop(.8, 'yellow');
        _color.addColorStop(.9, 'green');
        _color.addColorStop(1, 'blue');
        function _loading(){
            // 清除画布
            _context.clearRect(0, 0, 400, 400);
            // 保存当前状态
            _context.save();
            // 定义原点位置
            _context.translate(200, 200);
            // 开始绘画
            _context.beginPath();
            // 绘画一个半径为100的圆
            _context.arc(0, 0, 160, 0, Math.PI*2);
            __num += 10;
            _context.font = '30px 宋体';
            _context.textAlign = 'center';
            _context.strokeStyle = 'black';
            // 字体的绘画
            // 绘画出字体
            // context.stroke();
            // 结束绘画
            _context.closePath();
            // 开始绘画
            _context.beginPath();
            // 绘画一个半径为100的圆，开始弧度为负的90°，结束弧度为Math.PI/50 *num°（根据num去变化）
            // Math.PI/50是为了分为100个刻度，-Math.PI/2是因为开始为负的90°，所以要减掉它
            _context.arc(0, 0, 160, -Math.PI/2, (Math.PI/50*__num/10)-Math.PI/2);
            //绘制的边框宽度
            _context.lineWidth = 10;
            // 描边的颜色
            _context.strokeStyle = _color;
            // 描边
            _context.stroke();
            // 结束绘画
            _context.closePath();
            // 恢复状态
            _context.restore();
        }

        __num = 1000;
        _loading()
    </script>
    <script>
        // 获取对应的CanvasRenderingContext2D对象(画笔)
        const canvas = document.getElementsByTagName('canvas')[0]
        const context = canvas.getContext('2d');

        // canvas.style.marginTop = (window.innerHeight - 300)/3 + 30 + 'px';
        // canvas.style.marginLeft = (window.innerWidth - 300)/2 + 40 + 'px';

        let num = -1, _num;
        let timer;
        let color = context.createLinearGradient(0, 300, 300, 0);
        color.addColorStop(0, 'red');
        color.addColorStop(.1, 'orange');
        color.addColorStop(.2, 'yellow');
        color.addColorStop(.3, 'green');
        color.addColorStop(.4, 'blue');
        color.addColorStop(.5, 'purple');
        color.addColorStop(.6, 'red');
        color.addColorStop(.7, 'orange');
        color.addColorStop(.8, 'yellow');
        color.addColorStop(.9, 'green');
        color.addColorStop(1, 'blue');
        function loading(){
            // 清除画布
            context.clearRect(100, 100, 150, 150);
            // 保存当前状态
            context.save();
            // 定义原点位置
            context.translate(200, 200);
            // 开始绘画
            context.beginPath();
            // 绘画一个半径为100的圆
            context.arc(0, 0, 100, 0, Math.PI*2);
            num += 10;
            if (num>=1000){ clearInterval(timer); }
            context.font = '30px 宋体';
            context.textAlign = 'center';
            context.strokeStyle = 'black';
            // 字体的绘画
            _num = (num/10 > 100 ? 100 : num/10);
            context.strokeText(_num+'%', 0, 0);
            // 绘画出字体
            // context.stroke();
            // 结束绘画
            context.closePath();
            // 开始绘画
            context.beginPath();
            // 绘画一个半径为100的圆，开始弧度为负的90°，结束弧度为Math.PI/50 *num°（根据num去变化）
            // Math.PI/50是为了分为100个刻度，-Math.PI/2是因为开始为负的90°，所以要减掉它
            context.arc(0, 0, 100, -Math.PI/2, (Math.PI/50*num/10)-Math.PI/2);
            //绘制的边框宽度
            context.lineWidth = 10;
            // 描边的颜色
            context.strokeStyle = color;
            // 描边
            context.stroke();
            // 结束绘画
            context.closePath();
            // 恢复状态
            context.restore();
        }

        timer = setInterval(function () { loading(); }, 100)
    </script>
</body>
</html>
