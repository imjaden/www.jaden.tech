<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body style="background-color:white;">
    <canvas width="400" height="400"></canvas>
    <script>
        const _canvas = document.getElementsByTagName('canvas')[0]
        const _context = _canvas.getContext('2d');

        _canvas.style.marginTop = (window.innerHeight - 400)/3 + 'px';
        _canvas.style.marginLeft = (window.innerWidth - 400)/2 + 'px';

        function fun_draw_circle(_context, k, width, height, clear_x, clear_y, count, text) {
            let _color = _context.createLinearGradient(0, width, height, 0);
            _color.addColorStop(0, 'red');
            _color.addColorStop(.1, 'orange');
            _color.addColorStop(.2, 'yellow');
            _color.addColorStop(.3, 'green');
            _color.addColorStop(.4, 'blue');
            _color.addColorStop(.5, 'purple');
            _color.addColorStop(.6, 'red');
            _color.addColorStop(.7, 'orange');
            _color.addColorStop(.8, 'yellow');
            _color.addColorStop(.9, 'green');
            _color.addColorStop(1, 'blue');

            _context.clearRect(clear_x, clear_x, clear_y, clear_y);
            _context.save();
            _context.translate(200, 200);
            _context.beginPath();
            _context.arc(0, 0, k, 0, Math.PI*2);
            _context.font = '30px 宋体';
            _context.textAlign = 'center';
            _context.strokeStyle = 'black';
            _context.strokeText(text, 0, 0);
            _context.closePath();
            _context.beginPath();
            _context.arc(0, 0, k, -Math.PI/2, (Math.PI/50*count/10)-Math.PI/2);
            _context.lineWidth = 10;
            _context.strokeStyle = _color;
            _context.stroke();
            _context.closePath();
            _context.restore();
        }
        fun_draw_circle(_context, 100, 300, 300, 0, 350, 1000, '');

        let count = 1;
        let timer, text;
        timer = setInterval(function () { 
            text = (count/10) >= 100 ? '100%' : (count/10)+'%';
            fun_draw_circle(_context, 70, 300, 300, 150, 100, count, text);
            count += Math.floor(Math.random()*20);
            if (count >= 1000) clearInterval(timer)
        }, 100)
    </script>
</body>
</html>
